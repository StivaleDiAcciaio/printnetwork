<!--PAGINA DI AUTENTICAZIONE -->
<!--LOGIN E REGISTRAZIONE -->
<div class="row">
    <div class="col-md-6 col-md-offset-3">
        <div class="panel panel-custom">
            <div class="panel-body">
                <div class="row">
                    <div class="col-lg-12">
                        <!--LOGIN-->
                        <form id="idFormLogin" name="formLogin" role="form" style="display: block;">
                            <h2>LOGIN</h2>
                            <div class="form-group">
                                <input name="emailLogin" ng-model="formLoginData.email" ng-disabled ="checkToken()" type="email" placeholder="Email" class="form-control" tabindex="1" required autofocus>
                            </div>
                            <div class="form-group">
                                <input name="passwordLogin" ng-model="formLoginData.password" ng-disabled ="checkToken()" type="password" placeholder="Password" class="form-control" tabindex="2" required>
                            </div>
                            <div class="col-xs-4 form-group pull-left checkbox">
                                <input id="checkboxRicordami" ng-model="ricordami" type="checkbox" ng-disabled ="checkToken()" >
                                <label for="checkboxRicordami">Ricordami</label>   
                            </div>
                            <div class="col-xs-4 form-group">     
                                <button class="btn btn-lg btn-primary btn-block" ng-click="resetFormLogin()" ng-disabled ="checkToken()">reset</button>
                            </div> 
                            <div class="col-xs-4 form-group pull-right">     
                                <button class="btn btn-lg btn-primary btn-block" ng-click="login(formLogin)" ng-disabled ="checkToken()">Accedi</button>
                            </div>
                        </form>
                        <!--REGISTRAZIONE-->
                        <form id="idFormRegistrazione" name="formRegistrazione" role="form" style="display: none;">
                            <h2>REGISTRAZIONE</h2>
                            <div class="form-group">
                                <input name="nickRegistrazione" ng-model="formRegistrazioneData.nick" type="text" class="form-control" placeholder="Nome utente" tabindex="1" required autofocus maxlength="50">
                            </div>
                            <div class="form-group">
                                <input name="emailRegistrazione" ng-model="formRegistrazioneData.email" type="email" placeholder="Email" class="form-control" tabindex="1" required maxlength="50">
                                <span class="label label-danger" ng-show="formRegistrazione.emailRegistrazione.$error.email">
                                    email non valida.
                                </span> 
                            </div>
                            <div class="form-group">
                                <input name="passwordRegistrazione" ng-model="formRegistrazioneData.password" type="password" placeholder="Password" class="form-control" tabindex="2" required maxlength="50">
                            </div>
                            <div class="form-group">
                                <!--
                                    tramite la direttiva conferma-password
                                    capiamo se è stata correttamente confermata la password
                                -->
                                <input name="confermaPasswordRegistrazione" ng-model="confermaPasswordRegistrazione" 
                                       ng-show="formRegistrazione.confermaPasswordRegistrazione.$error.confronta"
                                       type="password" placeholder="Conferma Password" 
                                       conferma-password="formRegistrazioneData.password" 
                                       class="form-control" tabindex="2">
                                <span class="label label-danger" ng-show="formRegistrazione.confermaPasswordRegistrazione.$error.confronta">
                                    conferma la password
                                </span> 
                            </div>
                            <!--CONDIVIDO STAMPANTE-->
                            <div class="col-xs-12 form-group pull-left checkbox">
                                <input id="chkBoxCondividoStampante" 
                                       ng-model="condividoStampante" 
                                       ng-click="boxCondividoStampante(condividoStampante)"
                                       type="checkbox">
                                <label for="chkBoxCondividoStampante">Condivido Stampante</label>   
                            </div>
                            <div ng-if="condividoStampante">
                                <div class="col-xs-12 form-group" ng-init="formRegistrazioneData.tipologiaUtente = 'P'">
                                    <span class="infoNearField">sei un </span>
                                    <input id="utentePrivato" type="radio" ng-model="formRegistrazioneData.tipologiaUtente" 
                                           value="P" 
                                           ng-checked="condividoStampante">
                                    <label for="utentePrivato">privato</label>
                                    <input id="attivitaCommerciale" type="radio" ng-model="formRegistrazioneData.tipologiaUtente" value="A">
                                    <label for="attivitaCommerciale">attivita commerciale</label>
                                </div>
                                <div class="col-xs-12 form-group" ng-init="formRegistrazioneData.indirizzo.tipoIndirizzo = 'A'">
                                    <span class="infoNearField">fornisco un indirizzo </span>
                                    <input id="indirizzoApprossimato" type="radio" ng-model="formRegistrazioneData.indirizzo.tipoIndirizzo" 
                                           value="A" 
                                           ng-checked="condividoStampante">
                                    <label for="indirizzoApprossimato">approssimato</label>
                                    <input id="indirizzoEsatto" type="radio" ng-model="formRegistrazioneData.indirizzo.tipoIndirizzo" 
                                           value="E">
                                    <label for="indirizzoEsatto">esatto</label>
                                </div>
                                <div class="col-xs-12 form-group">
                                    <span ng-show="formRegistrazioneData.indirizzo.tipoIndirizzo == 'approssimato'" class="infoNearField">nei pressi di:</span>
                                    <input name="indirizzo" 
                                           ng-model="formRegistrazioneData.indirizzo.descrizione" type="text" 
                                           class="form-control"  title="puoi fornire un indirizzo approssimativo se vuoi" maxlength="50"
                                           placeholder="indirizzo (es:via ester cuttica 200,Legnano)" tabindex="2" ng-required="condividoStampante">
                                    <span class="label label-danger" ng-show="formRegistrazione.indirizzo.$error.required">
                                        inserisci indirizzo
                                    </span> 
                                </div>
                                <!--STAMPANTE 2D-->
                                <div class="col-xs-12 form-group pull-left checkbox">
                                    <!--se condivido stampate ma non ho selezionato nemmeno una stampa3d questo checkBox sara required-->
                                    <input id="chkBoxStampa2D" 
                                           ng-model="chkBoxStampa2D" 
                                           ng-click="boxCondividoST2D(chkBoxStampa2D)"
                                           type="checkbox" 
                                           ng-required="condividoStampante &&!chkBoxStampa3D">
                                    <label for="chkBoxStampa2D">Ho una Stampante 2D</label>   
                                </div>
                                <div ng-if="chkBoxStampa2D" ng-init="defaultFormatoStampa2D()">
                                    <div class="col-xs-12"><hr></div>
                                    <div class="col-xs-12 form-group" ng-init="formRegistrazioneData.tipologiaStampa.stampa2D.colore = 'C'">
                                        <input id="stampa2Dc" type="radio" ng-model="formRegistrazioneData.tipologiaStampa.stampa2D.colore" 
                                               value="C" 
                                               ng-checked="chkBoxStampa2D">
                                        <label for="stampa2Dc">a colori</label>
                                        <input id="stampa2Db" type="radio" ng-model="formRegistrazioneData.tipologiaStampa.stampa2D.colore" 
                                               value="B">
                                        <label for="stampa2Db">bianco e nero</label>
                                    </div>
                                    <div class="col-xs-12 form-group">
                                        <div class="col-xs-offset-3 col-xs-6 col-xs-offset-3">
                                            <button class="btn btn-secondary btn-block" ng-click="mainAnagFormati2Dmodal('sm')">formati disponibli</button>
                                        </div>
                                    </div>
                                    <!--
                                        tramite la direttiva formati-2d-min
                                        capiamo se è stato scelto almeno un formato stampa2d.
                                    -->
                                    <div class="col-xs-12 form-group">
                                        <label name="fs2dScelti"
                                               ng-model="formatiStampa2DScelti.length" 
                                               formati-2d-min="formatiStampa2DScelti">formati stampa 2d scelti: {{formatiStampa2DScelti.length}}</label>
                                        <div>
                                            <span class="label label-danger" ng-show="formRegistrazione.fs2dScelti.$error.checkFrmt2d">
                                                seleziona almeno un formato 2d
                                            </span> 
                                        </div>
                                    </div>

                                    <div class="col-xs-12 form-group" ng-repeat="formato in formatiStampa2DScelti">
                                        <div class="col-xs-4">
                                            <label>Formato stampa</label>
                                        </div>
                                        <div class="col-xs-4">
                                            <p>{{formato.value}}</p>
                                        </div>
                                        <div class="col-xs-4">
                                            <p>{{formato.label}}</p>
                                        </div>
                                    </div>
                                    <div class="col-xs-12"><hr></div>
                                </div>
                                <!--/STAMPANTE 2D-->
                                <!--STAMPANTE 3D-->                                
                                <div class="col-xs-12 form-group pull-left checkbox">
                                    <!--se condivido stampate ma non ho selezionato nemmeno una stampa2d questo checkBox sara required-->
                                    <input id="chkBoxStampa3D" 
                                           ng-model="chkBoxStampa3D" 
                                           ng-click="boxCondividoST3D(chkBoxStampa3D)"
                                           type="checkbox" 
                                           ng-required="condividoStampante &&!chkBoxStampa2D">
                                    <label for="chkBoxStampa3D">Ho una Stampante 3D</label>   
                                </div>
                                <div ng-if="chkBoxStampa3D">
                                    <div class="col-xs-12"><hr></div>
                                    <div class="col-xs-5 form-group">
                                        <div class="row">
                                            <div class="col-xs-12 form-group">
                                                <label for="altezzaStampa3D">altezza {{formRegistrazioneData.tipologiaStampa.stampa3D.unitaDimisura}}</label>   
                                                <input id="altezzaStampa3D"
                                                       name="altezzaStampa3D" 
                                                       ng-model="formRegistrazioneData.tipologiaStampa.stampa3D.altezza" 
                                                       type="number" 
                                                       min="0"
                                                       max="1000"
                                                       maxlength="4"
                                                       class="form-control" 
                                                       ng-class="formRegistrazione.altezzaStampa3D.$error.required? 'borderRed' :''"
                                                       ng-required="chkBoxStampa3D">
                                                <span class="label label-danger" ng-show="formRegistrazione.altezzaStampa3D.$error.max">
                                                    valore max 1000.
                                                </span>                                                 
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12 form-group">
                                                <label for="larghezzaStampa3D">larghezza {{formRegistrazioneData.tipologiaStampa.stampa3D.unitaDimisura}}</label>   
                                                <input id="larghezzaStampa3D"
                                                       name="larghezzaStampa3D" 
                                                       ng-model="formRegistrazioneData.tipologiaStampa.stampa3D.larghezza" 
                                                       type="number" 
                                                       min="0"
                                                       max="1000"
                                                       maxlength="4"
                                                       class="form-control" 
                                                       ng-class="formRegistrazione.larghezzaStampa3D.$error.required? 'borderRed' :''"
                                                       ng-required="chkBoxStampa3D">
                                                <span class="label label-danger" ng-show="formRegistrazione.larghezzaStampa3D.$error.max">
                                                    valore max 1000.
                                                </span> 
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12 form-group">
                                                <label for="profonditaStampa3D">profondità {{formRegistrazioneData.tipologiaStampa.stampa3D.unitaDimisura}}</label>   
                                                <input id="profonditaStampa3D"
                                                       name="profonditaStampa3D" 
                                                       ng-model="formRegistrazioneData.tipologiaStampa.stampa3D.profondita" 
                                                       type="number" 
                                                       min="0"
                                                       max="1000"
                                                       maxlength="4"
                                                       class="form-control" 
                                                       ng-class="formRegistrazione.profonditaStampa3D.$error.required? 'borderRed' :''"
                                                       ng-required="chkBoxStampa3D">
                                                <span class="label label-danger" ng-show="formRegistrazione.profonditaStampa3D.$error.max">
                                                    valore max 1000.
                                                </span> 
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-offset-2 col-xs-5 form-group" ng-init="formRegistrazioneData.tipologiaStampa.stampa3D.unitaDimisura = 'cm'">
                                        <div class="row">
                                            <div class="col-xs-12 form-group">
                                                <label for="idUnitaMisuraStampa3D">unità misura</label>   
                                                <select id="idUnitaMisuraStampa3D"                 
                                                        name="unitaMisuraStampa3D"
                                                        class="form-control"
                                                        ng-model="formRegistrazioneData.tipologiaStampa.stampa3D.unitaDimisura"
                                                        ng-required="chkBoxStampa3D">
                                                    <option ng-value="cm">cm</option>
                                                    <option ng-value="mm">mm</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 form-group">
                                        <input name="materialeStampa3D" 
                                               ng-model="formRegistrazioneData.tipologiaStampa.stampa3D.materiale" 
                                               type="text" 
                                               placeholder="materiale" 
                                               class="form-control" maxlength="20"
                                               ng-required="chkBoxStampa3D">
                                        <span class="label label-danger" ng-show="formRegistrazione.materialeStampa3D.$error.required">
                                            inserisci materiale
                                        </span> 
                                    </div>
                                </div>
                                <!--/STAMPANTE 3D-->                                
                            </div>
                            <div ng-show="formRegistrazione.$valid" class="form-group" >
                                <div class="col-xs-12 form-group pull-left checkbox">
                                    <input id="chkBoxPrivacy" ng-model="chkBoxPrivacy" type="checkbox">
                                    <label for="chkBoxPrivacy">Ho letto</label>   
                                    <a style="cursor:pointer" data-toggle="modal" data-target="#privacyModal">informativa sulla privacy</a>
                                </div>
                                <div class="col-xs-12 form-group pull-left checkbox">
                                    <input id="chkBoxRegolamento" ng-model="chkBoxRegolamento" type="checkbox">
                                    <label for="chkBoxRegolamento">Ho letto il</label>
                                    <a style="cursor:pointer" data-toggle="modal" data-target="#regolamentoModal">regolamento</a> 
                                </div>
                                <div class="row">
                                    <div class="col-sm-offset-3 col-sm-6 col-sm-offset-3">
                                        <button ng-disabled="!chkBoxRegolamento || !chkBoxPrivacy" 
                                                class="btn btn-lg btn-primary btn-block" 
                                                ng-click="registrazione(formRegistrazione)">Salva</button>
                                        <button type="reset" value="Reset" ng-click="resetRegistrazione()">Reset</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="panel-heading">
                <div class="row">
                    <div class="col-xs-6 tabs">
                        <a href="" class="active" id="idFormLoginLink"><div class="login">LOGIN</div></a>
                    </div>
                    <div class="col-xs-6 tabs">
                        <a href="" id="idFormRegistrazioneLink"><div class="register">REGISTRAZIONE</div></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    $(function () {
        $('#idFormLoginLink').click(function (e) {
            $("#idFormLogin").delay(100).fadeIn(100);
            $("#idFormRegistrazione").fadeOut(100);
            $('#idFormRegistrazioneLink').removeClass('active');
            $(this).addClass('active');
            e.preventDefault();
        });
        $('#idFormRegistrazioneLink').click(function (e) {
            $("#idFormRegistrazione").delay(100).fadeIn(100);
            $("#idFormLogin").fadeOut(100);
            $('#idFormLoginLink').removeClass('active');
            $(this).addClass('active');
            e.preventDefault();
        });

    });

</script>


